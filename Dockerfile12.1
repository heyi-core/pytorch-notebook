FROM nvidia/cuda:12.1.0-devel-ubuntu22.04
# python3.10-ubuntu22.04

# Set bash as the default shell
ENV SHELL=/bin/bash
ENV TZ=Asia/Shanghai
ENV LD_LIBRARY_PATH=/usr/local/cuda/lib64
ARG DEBIAN_FRONTEND=noninteractive

WORKDIR /workspace/

RUN apt update && apt install -y \
    python3-pip \
    apt-utils \
    vim \
    git \
    wget \
    curl
    
RUN ln -s /usr/bin/python3 /usr/bin/python

RUN pip install \
    torch \
    transformers \
    accelerate \
    jupyterlab \
    jupyterlab-language-pack-zh-CN \
    jupyterlab-git \
    jupyter-resource-usage \
    jupyterlab-search-replace \
    jupyterlab-code-formatter \
    jupyterlab-miami-nights \
    black \
    isort
CMD ["jupyter", "lab", "--ip=0.0.0.0", "--port=8080", "--allow-root", "--no-browser"]
EXPOSE 8080
